/*
* Datalist polyfill - https://github.com/mfranzke/datalist-polyfill
* @license Copyright(c) 2017 by Maximilian Franzke
* Supported by Christian, Johannes, @mitchhentges, @mertenhanisch, @ailintom, @Kravimir, @mischah, @hryamzik, @ottoville, @IceCreamYou, @wlekin, @eddr, @beebee1987 and @mricherzhagen - many thanks for that !
*/
!function(){"use strict";var e=window.document,t=window.navigator.userAgent,i="list"in e.createElement("input")&&Boolean(e.createElement("datalist")&&window.HTMLDataListElement),a=Boolean(-1!==t.indexOf("Trident/")||-1!==t.indexOf("Edge/"));if(i&&!a)return!1;Element.prototype.matches||(Element.prototype.matches=Element.prototype.msMatchesSelector);var n=!1,l=13,r=27,o=38,s=40,u=" / ",d=["text","email","number","search","tel","url"],p="polyfilled",c="polyfilling",v="###[P0LYFlLLed]###";window.addEventListener("touchstart",function e(){n=!0,window.removeEventListener("touchstart",e)});var y=window.MutationObserver||window.WebKitMutationObserver,f;void 0!==y&&(f=new y(function(t){var i=!1;if(t.forEach(function(e){for(var t=0;t<e.addedNodes.length;++t)"datalist"===e.target.tagName.toLowerCase()&&(i=e.target)}),i){var a=e.querySelector('input[list="'+i.id+'"]');""!==a.value&&x(E(i,a).length,i.getElementsByClassName("polyfilling")[0])}}));var g=function(e){var t=e.target,i=t.list,l=38===e.keyCode||40===e.keyCode;if("input"===t.tagName.toLowerCase()&&null!==i){if(a)return void(""===t.value||l||13===e.keyCode||27===e.keyCode||(m(t,i),t.focus()));var r=!1,o=i.getElementsByClassName("polyfilling")[0]||C(t,i);if(27!==e.keyCode&&13!==e.keyCode&&(""!==t.value||l)&&void 0!==o){E(i,t).length>0&&(r=!0);var s=0,u=o.options.length-1;n?o.selectedIndex=0:l&&"number"!==t.getAttribute("type")&&(o.selectedIndex=38===e.keyCode?u:0,o.focus())}x(r,o)}},m=function(e,t){Array.prototype.slice.call(t.options,0).forEach(function(t){var i=t.dataset.originalvalue||t.value;t.dataset.originalvalue||(t.dataset.originalvalue=i),t.label||t.text||(t.label=i),t.value=h(t,e.value)?e.value+"###[P0LYFlLLed]###"+i.toLowerCase():i})},b=function(e){var t=e.target,i=t.list;if(t.matches("input[list]")&&t.matches(".polyfilled")&&i){var a=i.querySelector('option[value="'+t.value.replace(/\\([\s\S])|(")/g,"\\$1$2")+'"]');a&&a.dataset.originalvalue&&(t.value=a.dataset.originalvalue)}},h=function(e,t){var i=e.value.toLowerCase(),a=t.toLowerCase(),n=e.getAttribute("label"),l=e.text.toLowerCase();return Boolean(!1===e.disabled&&(""!==i&&-1!==i.indexOf(a)||n&&-1!==n.toLowerCase().indexOf(a)||""!==l&&-1!==l.indexOf(a)))},w=function(e){if(e.target.matches("input[list]")){var t=e.target,i=t.list;if("input"===t.tagName.toLowerCase()&&null!==i&&(t.matches(".polyfilled")||(t.setAttribute("autocomplete","off"),t.setAttribute("role","textbox"),t.setAttribute("aria-haspopup","true"),t.setAttribute("aria-autocomplete","list"),t.setAttribute("aria-owns",t.getAttribute("list")),"focusin"===e.type?(t.addEventListener("keyup",g),t.addEventListener("focusout",w,!0),a&&t.addEventListener("input",b)):"blur"===e.type&&(t.removeEventListener("keyup",g),t.removeEventListener("focusout",w,!0),a&&t.removeEventListener("input",b)),t.className+=" polyfilled"),!a)){var n=i.getElementsByClassName("polyfilling")[0]||C(t,i),l=n&&n.querySelector("option:not(:disabled)")&&("focusin"===e.type&&""!==t.value||e.relatedTarget&&e.relatedTarget===n);x(l,n)}}};if(e.addEventListener("focusin",w,!0),!a){var E=function(t,i){void 0!==f&&f.disconnect();var a=t.getElementsByClassName("polyfilling")[0]||C(i,t),l=i.value,r=e.createDocumentFragment(),o=e.createDocumentFragment();"email"===i.getAttribute("type")&&null!==i.getAttribute("multiple")&&(l=l.substring(l.lastIndexOf(",")+1)),Array.prototype.slice.call(t.querySelectorAll("option:not(:disabled)")).sort(function(e,t){var a=e.value,n=t.value;return"url"===i.getAttribute("type")&&(a=a.replace(/(^\w+:|^)\/\//,""),n=n.replace(/(^\w+:|^)\/\//,"")),a.localeCompare(n)}).forEach(function(e){var t=e.value,i=e.getAttribute("label"),a=e.text;if(h(e,l)){var n=a.substr(0,t.length+" / ".length),s=t+" / ";a&&!i&&a!==t&&n!==s?e.innerText=t+" / "+a:e.text||(e.innerText=i||t),r.appendChild(e)}else o.appendChild(e)}),a.appendChild(r);var s=a.options.length;return a.size=s>10?10:s,a.multiple=!n&&s<2,(t.getElementsByClassName("ie9_fix")[0]||t).appendChild(o),void 0!==f&&f.observe(t,{childList:!0}),a.options},C=function(t,i){if(-1!==d.indexOf(t.getAttribute("type"))&&null!==i){var a=t.getClientRects(),l=window.getComputedStyle(t),r=e.createElement("select");if(r.setAttribute("class","polyfilling"),r.style.position="absolute",x(!1,r),r.setAttribute("tabindex","-1"),r.setAttribute("aria-live","polite"),r.setAttribute("role","listbox"),n||r.setAttribute("aria-multiselectable","false"),"block"===l.getPropertyValue("display"))r.style.marginTop="-"+l.getPropertyValue("margin-bottom");else{var o="rtl"===l.getPropertyValue("direction")?"right":"left";r.style.setProperty("margin-"+o,"-"+(a[0].width+parseFloat(l.getPropertyValue("margin-"+o)))+"px"),r.style.marginTop=parseInt(a[0].height+(t.offsetTop-i.offsetTop),10)+"px"}if(r.style.borderRadius=l.getPropertyValue("border-radius"),r.style.minWidth=a[0].width+"px",n){var s=e.createElement("option");s.innerText=i.title,s.disabled=!0,s.setAttribute("class","message"),r.appendChild(s)}return i.appendChild(r),n?r.addEventListener("change",k):r.addEventListener("click",k),r.addEventListener("blur",k),r.addEventListener("keydown",k),r.addEventListener("keypress",L),r}},L=function(t){var i=t.target,a=i.parentNode,n=e.querySelector('input[list="'+a.id+'"]');"select"===i.tagName.toLowerCase()&&null!==n&&(!t.key||"Backspace"!==t.key&&1!==t.key.length||(n.focus(),"Backspace"===t.key?(n.value=n.value.substr(0,n.value.length-1),A(n)):n.value+=t.key,E(a,n)))},k=function(t){var i=t.currentTarget,a=i.parentNode,n=e.querySelector('input[list="'+a.id+'"]');if("select"===i.tagName.toLowerCase()&&null!==n){var l=t.type,r="keydown"===l&&13!==t.keyCode&&27!==t.keyCode;if(("change"===l||"click"===l||"keydown"===l&&(13===t.keyCode||"Tab"===t.key))&&i.value.length>0&&i.value!==a.title){var o;n.value="email"===n.getAttribute("type")&&null!==n.getAttribute("multiple")&&(o=n.value.lastIndexOf(","))>-1?n.value.slice(0,o)+","+i.value:n.value=i.value,A(n),"Tab"!==t.key&&n.focus(),r=!1}else"keydown"===l&&27===t.keyCode&&n.focus();x(r,i)}},A=function(t){var i;"function"==typeof Event?i=new Event("input",{bubbles:!0}):(i=e.createEvent("Event"),i.initEvent("input",!0,!1)),t.dispatchEvent(i)},x=function(t,i){t?i.removeAttribute("hidden"):i.setAttributeNode(e.createAttribute("hidden")),i.setAttribute("aria-hidden",(!t).toString())};!function(t){t&&t.prototype&&void 0===t.prototype.list&&Object.defineProperty(t.prototype,"list",{get:function(){var i=e.getElementById(this.getAttribute("list"));return"object"==typeof this&&this instanceof t&&i&&i.matches("datalist")?i:null}})}(window.HTMLInputElement),function(e){e&&e.prototype&&void 0===e.prototype.options&&Object.defineProperty(e.prototype,"options",{get:function(){return"object"==typeof this&&this instanceof e?this.getElementsByTagName("option"):null}})}(window.HTMLElement)}}();